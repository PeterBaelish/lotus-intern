# 一、嵌入式操作系统基础

- 时钟节拍：通过特定硬件定时器产生。硬件定时器会产生周期的中断，在中断处理函数中运行内核代码，进行任务调度和定时器事件处理等内核工作。 
- ISR：中断服务程序。过程如下
  - 保护被中断进程现场。为了在中断处理结束后能够使进程准确地返回到[中断点](https://baike.baidu.com/item/中断点)，系统必须保存当前[处理机](https://baike.baidu.com/item/处理机)[程序状态字](https://baike.baidu.com/item/程序状态字)PSW和[程序计数器](https://baike.baidu.com/item/程序计数器)PC等的值。
  - 分析中断原因，转去执行相应的中断处理程序。在多个中断请求同时发生时，处理[优先级](https://baike.baidu.com/item/优先级/5643121)最高的中断源发出的中断请求。
  - 恢复被中断进程的现场，CPU继续执行原来被中断的进程。



# 二、IPC概论

信号量作用：同步（运行步骤） or 互斥（许可、权限）



# 三、信号量

###  1、二值信号量

- 二值信号量作为资源是否可用的标记，或者用来同步任务
- 被创建时，初始状态可以在可用或不可用中选
- 可以被任何任务或ISR释放，甚至在没有获得过二值信号量的情况下也可以
- 当二值信号量处于不可用的状态时，如果有任务来获取，那么该任务直接返回失败，或者阻塞到该二值信号量上，直到该二值信号量可用或者任务阻塞时限期满；当二值信号量处于可用状态时，如果有任务来释放信号量，那么直接返回失败或阻塞到该信号量上

### 2、计数信号量

- 计数信号量表示资源可用的个数，它提供一个计数器给任务或ISR使用，数值0说明没有资源可用
- 被创建时，初始状态可以是范围内任意值
- 可以被任何任务或ISR释放，甚至在没有获得过计数信号量的情况下也可以

### 3、信号量操作

- 创建：用户可以指定信号量的参数属性如针对多个任务在信号量上的阻塞和调度方式
- 删除
- 获取
- 释放
- 刷新：当有多个任务阻塞在信号量的任务阻塞队列时，可以将这些任务接触阻塞完成多任务的同步
- 查询

### 4、信号量应用

- 任务单向同步：一个任务释放信号量，一个任务获取信号量
- 任务双向同步：一个任务需要另一个任务的确认才可执行。使用二值信号量
- 多任务单向同步：多个任务需要等待相同的事件发生后才能运行。使用二值信号量
- 共享资源同步访问：使用二值信号量实现对共享资源的互斥访问，它能实现多个任务对共享资源的访问串行化，避免资源使用混乱。



# 四、互斥量

